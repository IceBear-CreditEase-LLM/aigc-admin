import{_ as k}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-f6213a89.js";import{_ as V}from"./UiParentCard.vue_vue_type_script_setup_true_lang-0e150107.js";import{_ as B}from"./AiAudio.vue_vue_type_style_index_0_lang-ab9d5699.js";import{d as C,r as o,c as j,k as d,Z as f,j as e,m as a,_ as u,l as g,F as m,W as _,$ as p,au as $}from"./utils-15090c58.js";import{V as l}from"./VCol-e2fcfa86.js";import{V as n}from"./VRow-ab8e6ed5.js";import{V as F}from"./VFileInput-01190dfb.js";import{a0 as L,$ as N,V as R,a4 as v}from"./index-24ceeda1.js";import{V as U}from"./VRating-8e27e96d.js";const q=C({__name:"index",setup(S){const h=o({title:"声纹查询"}),b=o([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹查询",disabled:!0,href:"#"}]),i=o(!1),s=o([]),t=o(null),c=j(()=>s.value&&s.value.length>0?URL.createObjectURL(s.value[0]):""),x=async()=>{if(!c)return;i.value=!0;const[y,r]=await $.upload({url:"/voice/search",data:{file:s.value}});r&&(t.value=r.data),i.value=!1};return(y,r)=>(d(),f(m,null,[e(k,{title:h.value.title,breadcrumbs:b.value},null,8,["title","breadcrumbs"]),e(n,null,{default:a(()=>[e(l,{cols:"12"},{default:a(()=>[e(V,{title:"上传音频"},{default:a(()=>[e(n,{class:"justify-center"},{default:a(()=>[e(l,{cols:"12",class:"text-center"},{default:a(()=>[e(B,{src:c.value},null,8,["src"])]),_:1}),e(l,{cols:"12",md:"6"},{default:a(()=>[e(F,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=w=>s.value=w),accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"请选择音频","prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:a(()=>[e(L,{elevation:"10"},{default:a(()=>[e(N,{class:"text-center"},{default:a(()=>[e(R,{loading:i.value,disabled:!c.value,color:"primary",width:"200",onClick:x},{default:a(()=>[u("开始查询")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(l,{cols:"12"},{default:a(()=>[e(V,{title:"查询结果"},{default:a(()=>[t.value?(d(),g(n,{key:0,class:"text-body-1 justify-center pa-5"},{default:a(()=>[t.value.isSame?(d(),f(m,{key:0},[e(l,{cols:"12",class:"d-flex align-center"},{default:a(()=>[e(v,{class:"font-weight-medium"},{default:a(()=>[u("用户姓名：")]),_:1}),_("span",null,p(t.value.userName),1)]),_:1}),e(l,{cols:"12",class:"d-flex align-center"},{default:a(()=>[e(v,{class:"font-weight-medium"},{default:a(()=>[u("用户标识：")]),_:1}),_("span",null,p(t.value.userKey),1)]),_:1}),e(l,{cols:"12",class:"d-flex align-center"},{default:a(()=>[e(v,{class:"font-weight-medium"},{default:a(()=>[u("相似度：")]),_:1}),e(U,{"model-value":t.value.dist*10,length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["model-value"]),_("span",null,"("+p(t.value.dist)+")",1)]),_:1})],64)):(d(),f(m,{key:1},[u("未匹配到相似的声纹")],64))]),_:1})):(d(),g(n,{key:1,class:"text-body-1 justify-center pa-5"},{default:a(()=>[u(" 暂无结果 ")]),_:1}))]),_:1})]),_:1})]),_:1})],64))}});export{q as default};
