import{_ as z,a0 as V,$ as g,V as w,a1 as y,a2 as D,a3 as o}from"./index-24ceeda1.js";import{r as s,x as I,k as A,Z as B,j as e,m as a,W as d,_ as p,$ as b,F as S,au as N,al as O,am as T}from"./utils-15090c58.js";import{_ as Y}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-f6213a89.js";import{_ as h}from"./UiParentCard.vue_vue_type_script_setup_true_lang-0e150107.js";import{V as _}from"./VCol-e2fcfa86.js";import{V as U}from"./VFileInput-01190dfb.js";import{V as C}from"./VRating-8e27e96d.js";import{V as E}from"./VRow-ab8e6ed5.js";const j=c=>(O("data-v-18c6a52c"),c=c(),T(),c),W=j(()=>d("div",{class:"d-flex flex-column flex-sm-row gap-3 justify-center"},[d("audio",{id:"audio1",controls:""},"Your browser does not support the audio element.")],-1)),Z={class:"d-flex flex-column flex-sm-row gap-3 justify-center",style:{"margin-top":"20px"}},q=j(()=>d("div",{class:"d-flex flex-column flex-sm-row gap-3 justify-center"},[d("audio",{id:"audio2",controls:""},"Your browser does not support the audio element.")],-1)),G={class:"d-flex flex-column flex-sm-row gap-3 justify-center",style:{"margin-top":"20px"}},H={class:"d-flex flex-column flex-sm-row gap-3 justify-center"},J={__name:"index",setup(c){const v=s(!1),u=s(!1),n=s(0);s(""),s("");const r=s(!1),R=s({title:"声纹识别"}),m=I({data:{}}),F=s([{text:"智能声纹",disabled:!1,href:"#"},{text:"声纹识别",disabled:!0,href:"#"}]);function L(f){const l=o("#file1")[0].files[0],t=URL.createObjectURL(l),i=o("#audio1")[0];i.src=t,o("#file1")[0].files[0]&&o("#file2")[0].files[0]?r.value=!0:r.value=!1}function $(f){const l=o("#file2")[0].files[0],t=URL.createObjectURL(l),i=o("#audio2")[0];i.src=t,o("#file1")[0].files[0]&&o("#file2")[0].files[0]?r.value=!0:r.value=!1}function k(){if(u.value)return;let f=o("#file1")[0].files[0],l=o("#file2")[0].files[0];if(f&&l){u.value=!0;var t=new FormData;t.append("file1",f),t.append("file2",l),t.append("threshold",.8),N.upload("/voice/compare",t).then(i=>{let x=i;u.value=!1,x&&(x.code==200?(m.data=x.data.data,n.value=m.data.dist*10):n.value=0)}).catch(i=>{u.value=!1,console.error(i)})}}return(f,l)=>(A(),B(S,null,[e(Y,{title:R.value.title,breadcrumbs:F.value},null,8,["title","breadcrumbs"]),e(E,null,{default:a(()=>[e(_,{cols:"12",md:"6"},{default:a(()=>[e(h,{title:"第一段声音"},{default:a(()=>[W,d("div",Z,[e(U,{id:"file1",ref:"file1",accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"选择第一段音频",onChange:L,"prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,512)])]),_:1})]),_:1}),e(_,{cols:"12",md:"6"},{default:a(()=>[e(h,{title:"第二段声音"},{default:a(()=>[q,d("div",G,[e(U,{id:"file2",ref:"file2",accept:"audio/*, .mp3, .wma, .amr, .wav, .m4a",label:"选择第二段音频",onChange:$,"prepend-icon":"mdi-volume-high","hide-details":"",variant:"outlined"},null,512)])]),_:1})]),_:1}),e(_,{cols:"12"},{default:a(()=>[e(V,{elevation:"10"},{default:a(()=>[e(g,null,{default:a(()=>[d("div",H,[e(w,{loading:u.value,disabled:!r.value,color:"secondary",width:"200",height:"48",onClick:k,size:"large"},{default:a(()=>[p("开始分析")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1}),e(_,{cols:"12"},{default:a(()=>[e(h,{title:"分析结果"},{default:a(()=>[e(y,{class:"flex-column"},{default:a(()=>[e(g,{style:{"font-size":"20px"}},{default:a(()=>[p(b(m.data.message),1)]),_:1}),e(C,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=t=>n.value=t),length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=t=>v.value=t),"max-width":"800",title:"分析结果"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{class:"flex-column"},{default:a(()=>[e(g,{style:{"font-size":"20px"}},{default:a(()=>[p(b(m.data.message),1)]),_:1}),e(C,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=t=>n.value=t),length:"10",readonly:"",density:"compact",size:"large",color:"warning"},null,8,["modelValue"]),e(w,{color:"secondary",class:"px-4 mx-auto",onClick:l[2]||(l[2]=t=>v.value=!1),variant:"tonal",width:"200",height:"48",style:{"margin-top":"20px"}},{default:a(()=>[p("关闭")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},te=z(J,[["__scopeId","data-v-18c6a52c"]]);export{te as default};
