import{_ as L}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-f6213a89.js";import{_ as D}from"./UiParentCard.vue_vue_type_script_setup_true_lang-0e150107.js";import{_ as U}from"./Explain.vue_vue_type_style_index_0_lang-9177768e.js";import{d as N,ax as q,i as G,x as y,z as I,o as E,k as v,Z as S,W as o,n as s,F as $,a5 as R,l as H,m as t,$ as T,Y as M,au as B,at as j,r as b,D as z,U as A,j as e,_ as f,a1 as W,al as Y,am as Z}from"./utils-15090c58.js";import{I as J,S as K}from"./SpeakerSelector-9a1a6be6.js";import{a0 as O,_ as F,a4 as x,a5 as P}from"./index-24ceeda1.js";import{V as c}from"./VCol-e2fcfa86.js";import{V as Q}from"./VForm-123b6ecf.js";import{V as C}from"./VRow-ab8e6ed5.js";import{V as X}from"./VTextarea-b1274484.js";import{V as ee}from"./VSwitch-83b6bbc0.js";import"./IconInfoCircle-03c84ef6.js";import"./IconCircleCheckFilled-2ca5e51b.js";import"./AiAudio.vue_vue_type_style_index_0_lang-ab9d5699.js";const te={style:{"aspect-ratio":"1"}},ae=["src","poster"],se={class:"box-list scrollbar-auto flex-1 pt-4 overflow-auto"},le=["onClick"],oe={class:"image-human overflow-hidden"},ie=["src","alt"],re={class:"hv-center mt-2"},ne={class:"line1"},de=N({__name:"DigitalHumanSelector",setup(_){q();const p=G("provieDigitalHumanEdit"),r=y({list:[]}),{selectedDigitalHuman:i}=I(p);function w(g,m){p.selectedDigitalHuman=g}const l=async()=>{await B.get({showLoading:!0,url:"/api/digitalhuman/person/list",data:{page:-1}}).then(([g,m])=>{m&&(r.list=m.list,r.list.length>0&&(p.selectedDigitalHuman=r.list[0]))})};return E(()=>{l()}),(g,m)=>(v(),S("div",null,[o("div",te,[o("video",{style:{width:"100%",height:"100%"},src:s(i).video,controls:"",poster:s(i).cover},null,8,ae)]),o("div",se,[(v(!0),S($,null,R(r.list,(n,h)=>(v(),H(O,{variant:"outlined",rounded:"sm",elevation:"0",class:"pa-2 bg-hover-secondary d-inline-block list-item ma-2 overflow-visible",pointer:""},{default:t(()=>{var V;return[o("div",{onClick:d=>w(n,h)},[o("div",oe,[o("img",{src:n.cover,alt:n.cname},null,8,ie)]),o("div",re,[o("div",ne,T(n.cname),1)]),n.name===((V=s(i))==null?void 0:V.name)?(v(),H(J,{key:0})):M("",!0)],8,le)]}),_:2},1024))),256))])]))}});const ue=F(de,[["__scopeId","data-v-5ed777a8"]]),ce=_=>(Y("data-v-ff23ea29"),_=_(),Z(),_),me=ce(()=>o("div",null,"请输入语音播放文本，文本内容小于200个字(包括标点符号)。",-1)),_e=N({__name:"digitalHumanEdit",setup(_){const p=j(),r=b();b();const i=y({style:{},formData:{text:"",title:"",speakName:"",isGfpgan:!1},selectedSpeaker:{speakName:"",speakCname:"",headImg:"",speakDemo:"",gender:"",ageGroup:"",subTitle:""},selectedDigitalHuman:{name:"",cname:"",cover:"",video:""},listSpeaker:[]}),{style:w,formData:l,selectedSpeaker:g}=I(i);z("provieDigitalHumanEdit",i);const m=b({title:"创建视频"}),n=b([{text:"数字人",disabled:!1,href:"#"},{text:"创建视频",disabled:!0,href:"#"}]),h=y({title:[d=>!!d||"请输入标题"],text:[d=>!!d||"请输入语音播放文本"]}),V=async()=>{const{valid:d}=await r.value.validate();if(d){const[a,k]=await B.post({url:"/api/digitalhuman/synthesis/create",showSuccess:!0,showLoading:"btn#btnSubmit",data:{...i.formData,dhpName:i.selectedDigitalHuman.name}});k&&p.push("/digital-human/video-list/list")}else{let a="请处理页面标错的地方后，再尝试提交";W.warning(a)}};return E(()=>{}),(d,a)=>{const k=A("AiBtn");return v(),S($,null,[e(L,{title:m.value.title,breadcrumbs:n.value},null,8,["title","breadcrumbs"]),e(C,null,{default:t(()=>[e(c,{cols:"12",md:"6"},{default:t(()=>[e(D,{title1:"人物视频"},{default:t(()=>[e(ue)]),_:1})]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(D,{title:"开始数字人合成"},{default:t(()=>[e(Q,{ref_key:"refForm",ref:r,class:"my-form"},{default:t(()=>[e(C,null,{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[e(x,{class:"mb-2 required"},{default:t(()=>[f("标题"),e(U,{class:"ml-2"},{default:t(()=>[f("用于列表展示和搜索，能够快速了解基本信息")]),_:1})]),_:1}),e(P,{density:"compact",variant:"outlined",placeholder:"请输入标题","hide-details":"auto",rules:h.title,modelValue:s(l).title,"onUpdate:modelValue":a[0]||(a[0]=u=>s(l).title=u)},null,8,["rules","modelValue"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(x,{class:"mb-2 required",style:{"white-space":"inherit"}},{default:t(()=>[me]),_:1}),e(X,{modelValue:s(l).text,"onUpdate:modelValue":a[1]||(a[1]=u=>s(l).text=u),modelModifiers:{trim:!0},rules:h.text,placeholder:"请输入",counter:"",rows:"5",maxlength:"200"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(x,{class:"mb-2 required"},{default:t(()=>[f("是否超分")]),_:1}),e(ee,{modelValue:s(l).isGfpgan,"onUpdate:modelValue":a[2]||(a[2]=u=>s(l).isGfpgan=u),color:"primary","hide-details":"auto"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(x,{class:"mb-2 required"},{default:t(()=>[f("请选择需要合成的发声人")]),_:1}),e(K,{modelValue:s(l).speakName,"onUpdate:modelValue":a[3]||(a[3]=u=>s(l).speakName=u)},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"hv-center"},{default:t(()=>[e(k,{id:"btnSubmit",color:"secondary",width:"200",height:"48",size:"large",onClick:V},{default:t(()=>[f("开始合成")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})],64)}}});const Ce=F(_e,[["__scopeId","data-v-ff23ea29"]]);export{Ce as default};
