import{d as oe,x as D,r as V,o as me,U as w,S as fe,k as E,l as z,m as t,j as e,_ as i,$ as T,n as Y,aw as j,Q as se,Z as N,au as R,c as A,H as Q,i as _e,a3 as Ce,D as we,z as Ee,V as Me,W as m,aB as Ue,al as $e,am as Be,Y as ie,a0 as De,at as Ae,av as Le,F as re}from"./utils-15090c58.js";import{_ as Re}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-f6213a89.js";import{_ as ue}from"./UiParentCard.vue_vue_type_script_setup_true_lang-0e150107.js";import{A as be}from"./AlertBlock-c06c49ed.js";import{_ as Fe}from"./ConfirmByInput.vue_vue_type_style_index_0_lang-77722b42.js";import{_ as qe}from"./ConfirmByClick.vue_vue_type_style_index_0_lang-3456f2c5.js";import{C as ze}from"./ChipBoolean-c6a17e6f.js";import{_ as U}from"./Explain.vue_vue_type_style_index_0_lang-9177768e.js";import{_ as Ne}from"./UploadFile.vue_vue_type_script_setup_true_lang-4cfa6d0e.js";import{V as L}from"./VCol-e2fcfa86.js";import{V as ve}from"./VRow-ab8e6ed5.js";import{p as J,m as O,R as Ge,a as xe,r as We,g as H,S as Ye,s as je,G as ge,b as K,au as he,av as Qe,O as Je,a6 as de,ao as Oe,v as ye,ak as He,o as Ke,T as Ze,q as Xe,U as et,w as tt,y as at,ai as ce,e as lt,V as Ve,a5 as $,_ as Se}from"./index-24ceeda1.js";import{V as nt}from"./VTextarea-b1274484.js";import{V as ot}from"./VCheckbox-3e0659d6.js";import{V as st}from"./VForm-123b6ecf.js";import{_ as it,I as rt,a as ut}from"./TaskOverview.vue_vue_type_script_setup_true_lang-e553984f.js";import{t as pe}from"./map-7aaf78cf.js";import{_ as dt}from"./DialogLog.vue_vue_type_style_index_0_lang-d72a4ceb.js";import{I as ct}from"./IconCircleCheckFilled-2ca5e51b.js";import"./IconInfoCircle-03c84ef6.js";import"./VAlert-30650f94.js";import"./Confirm-aedf99ab.js";import"./VFileInput-01190dfb.js";import"./TextLog-183c7d6e.js";const pt=oe({__name:"FileList",emits:["selected"],setup(a,{emit:S}){const r=S,s=D({list:[],total:0}),n=V(),f=V(!1),p=async(k={})=>{const[C,g]=await R.get({url:"/files",showLoading:n.value.el,data:{purpose:"fine-tune",...k}});g?(s.list=g.list||[],s.total=g.total):(s.list=[],s.total=0)},x=()=>{n.value.query({page:1})},I=k=>{f.value||r("selected",k)};return me(()=>{p()}),(k,C)=>{const g=w("el-table-column"),h=w("TableWithPager"),c=fe("copy");return E(),z(ve,{class:"my-0"},{default:t(()=>[e(L,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[e(Ne,{"show-loading":"",label:"上传微调文件",purpose:"fine-tune","onUpload:success":x,onLoading:C[0]||(C[0]=y=>f.value=y)})]),_:1}),e(L,{cols:"12"},{default:t(()=>[e(h,{onQuery:p,ref_key:"tableWithPagerRef",ref:n,"row-class-name":"cursor-pointer",infos:s,height:"400px",onRowClick:I},{default:t(()=>[e(g,{label:"文件名",prop:"filename","min-width":"250px"}),e(g,{label:"文件大小",width:"150px"},{default:t(({row:y})=>[i(T(Y(j).getFileSize(y.size)),1)]),_:1}),e(g,{label:"文件地址",prop:"s3Url","min-width":"400px"},{default:t(({row:y})=>[se((E(),N("span",null,[i(T(y.s3Url),1)])),[[c,y.s3Url]])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})}}});const G=Symbol.for("vuetify:v-expansion-panel"),mt=["default","accordion","inset","popout"],ft=J({color:String,static:Boolean,variant:{type:String,default:"default",validator:a=>mt.includes(a)},readonly:Boolean,...O(),...Ge(),...xe(),...We()},"VExpansionPanels"),_t=H()({name:"VExpansionPanels",props:ft(),emits:{"update:modelValue":a=>!0},setup(a,S){let{slots:r}=S;Ye(a,G);const{themeClasses:s}=je(a),n=A(()=>a.variant&&`v-expansion-panels--variant-${a.variant}`);return ge({VExpansionPanel:{color:Q(a,"color")},VExpansionPanelTitle:{readonly:Q(a,"readonly"),static:Q(a,"static")}}),K(()=>e(a.tag,{class:["v-expansion-panels",s.value,n.value,a.class],style:a.style},r)),{}}}),bt=J({...O(),...he()},"VExpansionPanelText"),ke=H()({name:"VExpansionPanelText",props:bt(),setup(a,S){let{slots:r}=S;const s=_e(G);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:n,onAfterLeave:f}=Qe(a,s.isSelected);return K(()=>e(Je,{onAfterLeave:f},{default:()=>{var p;return[se(e("div",{class:["v-expansion-panel-text",a.class],style:a.style},[r.default&&n.value&&e("div",{class:"v-expansion-panel-text__wrapper"},[(p=r.default)==null?void 0:p.call(r)])]),[[Ce,s.isSelected.value]])]}})),{}}}),Pe=J({color:String,expandIcon:{type:de,default:"$expand"},collapseIcon:{type:de,default:"$collapse"},hideActions:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...O()},"VExpansionPanelTitle"),Te=H()({name:"VExpansionPanelTitle",directives:{Ripple:Oe},props:Pe(),setup(a,S){let{slots:r}=S;const s=_e(G);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:n,backgroundColorStyles:f}=ye(a,"color"),p=A(()=>({collapseIcon:a.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:a.expandIcon,readonly:a.readonly}));return K(()=>{var x;return se(e("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--static":a.static},n.value,a.class],style:[f.value,a.style],type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:a.readonly?void 0:s.toggle},[e("span",{class:"v-expansion-panel-title__overlay"},null),(x=r.default)==null?void 0:x.call(r,p.value),!a.hideActions&&e("span",{class:"v-expansion-panel-title__icon"},[r.actions?r.actions(p.value):e(He,{icon:s.isSelected.value?a.collapseIcon:a.expandIcon},null)])]),[[fe("ripple"),a.ripple]])}),{}}}),vt=J({title:String,text:String,bgColor:String,...O(),...Ke(),...Ze(),...he(),...Xe(),...xe(),...Pe()},"VExpansionPanel"),xt=H()({name:"VExpansionPanel",props:vt(),emits:{"group:selected":a=>!0},setup(a,S){let{slots:r}=S;const s=et(a,G),{backgroundColorClasses:n,backgroundColorStyles:f}=ye(a,"bgColor"),{elevationClasses:p}=tt(a),{roundedClasses:x}=at(a),I=A(()=>(s==null?void 0:s.disabled.value)||a.disabled),k=A(()=>s.group.items.value.reduce((h,c,y)=>(s.group.selected.value.includes(c.id)&&h.push(y),h),[])),C=A(()=>{const h=s.group.items.value.findIndex(c=>c.id===s.id);return!s.isSelected.value&&k.value.some(c=>c-h===1)}),g=A(()=>{const h=s.group.items.value.findIndex(c=>c.id===s.id);return!s.isSelected.value&&k.value.some(c=>c-h===-1)});return we(G,s),ge({VExpansionPanelText:{eager:Q(a,"eager")}}),K(()=>{const h=!!(r.text||a.text),c=!!(r.title||a.title);return e(a.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":s.isSelected.value,"v-expansion-panel--before-active":C.value,"v-expansion-panel--after-active":g.value,"v-expansion-panel--disabled":I.value},x.value,n.value,a.class],style:[f.value,a.style]},{default:()=>{var y;return[e("div",{class:["v-expansion-panel__shadow",...p.value]},null),c&&e(Te,{key:"title",collapseIcon:a.collapseIcon,color:a.color,expandIcon:a.expandIcon,hideActions:a.hideActions,ripple:a.ripple},{default:()=>[r.title?r.title():a.title]}),h&&e(ke,{key:"text"},{default:()=>[r.text?r.text():a.text]}),(y=r.default)==null?void 0:y.call(r)]}})}),{}}}),Z=a=>($e("data-v-6407775c"),a=a(),Be(),a),gt={class:"orangeTxt"},ht={class:"mx-auto mt-3",style:{width:"540px"}},yt=Z(()=>m("label",{class:"required"},"微调文件",-1)),Vt={class:"required"},St=Z(()=>m("label",{class:"required"},"训练轮次",-1)),kt=Z(()=>m("label",null,"备注",-1)),Pt=Z(()=>m("label",null,"Lora ",-1)),Tt={class:"required"},It={class:"required"},Ct={class:"required"},wt={class:"required"},Et={class:"required"},Mt={class:"required"},Ut=oe({__name:"createTaskPane",emits:["submit"],setup(a,{expose:S,emit:r}){const s=D({operateType:"add"}),n=D({fileId:"",baseModel:null,trainEpoch:1,suffix:"",remark:"",trainBatchSize:8,evalBatchSize:32,accumulationSteps:1,procPerNode:2,learningRate:2e-5,modelMaxLength:2048,lora:!1}),f=D({estimateTime:"",readyOnly:!0}),p=V(null),x=r,I=/^\+?[1-9][0-9]*$/,k=V(),C=V(),g=V(),h=V(),c=D({fileId:[l=>!!l||"请选择微调文件"],baseModel:[l=>!!l||"请选择基础模型"],trainEpoch:[l=>M(l,1,512,"请输入训练轮次",!0)],trainBatchSize:[l=>M(l,1,512,"请输入训练批次",!0)],evalBatchSize:[l=>M(l,1,32,"请输入评估批次",!0)],accumulationSteps:[l=>M(l,1,32,"请输入梯度累加步数",!0)],procPerNode:[l=>M(l,1,16,"请输入GPU数量",!0)],learningRate:[l=>M(l,1e-6,1,"请输入学习率")],modelMaxLength:[l=>M(l,1,5e5,"请输入模型最大长度",!0)]}),y=V("");Ee(f);const M=(l,o,_,v,B=!1)=>l!==""?l<o?`下限 ${o}`:l>_?`上限 ${_}`:B&&I.test(l)!=!0?"请输入正整数":!0:v;((l,o=300)=>{let _=null;return o==null?V(l):Ue((v,B)=>({get(){return v(),l},set(d){_!=null&&(clearTimeout(_),_=null),_=setTimeout(()=>{l=d,B()},o)}}))})(n.trainEpoch);const X=()=>{g.value.show({showActions:!1})},ee=l=>{g.value.hide(),p.value=l,n.fileId=l.fileId,q()},te=()=>{p.value=null,n.fileId=""},W=async(l={})=>{const[o,_]=await R.post({...l,showSuccess:!0,url:"/finetuning",data:n});_&&(k.value.hide(),x("submit"))},ae=async(l={})=>{const[o,_]=await R.post({...l,showSuccess:!1,url:"/api/finetuning/estimate",data:n});_&&(f.estimateTime=_.time?_.time:"")},le=async(l={})=>{},q=()=>{n.baseModel&&n.fileId.length>0&&n.procPerNode>0&&I.test(String(n.trainEpoch))!=!1&&n.trainEpoch>0&&I.test(String(n.procPerNode))!=!1&&ae()},b=l=>{const o=h.value.$el;l.some(v=>o.querySelector(`#${v.id}`))&&(y.value="advancedSetting")},P=({valid:l,errors:o,showLoading:_})=>{l?s.operateType=="add"?W({showLoading:_}):le({showLoading:_}):b(o)};return S({show({title:l,operateType:o}){k.value.show({title:l,refForm:C}),s.operateType=o,o=="add"&&(p.value=null,n.baseModel=null,n.fileId="",n.remark="",n.suffix="",f.estimateTime="")}}),(l,o)=>{const _=w("Select"),v=w("Dialog"),B=w("Pane");return E(),z(B,{ref_key:"refPane",ref:k,onSubmit:P},Me({default:t(()=>[m("div",ht,[e(be,{class:"mb-6"},{default:t(()=>[i("微调模型的时间可能会很长，微调完成之后会邮件通知您！")]),_:1}),e(st,{ref_key:"refForm",ref:C,class:"my-form"},{default:t(()=>[e(ce,{rules:c.fileId,modelValue:n.fileId,"onUpdate:modelValue":o[0]||(o[0]=d=>n.fileId=d),"hide-details":"auto"},{prepend:t(()=>[yt]),default:t(()=>[p.value?(E(),z(lt,{key:0,closable:"",color:"info","onClick:close":te},{default:t(()=>[i(T(p.value.filename),1)]),_:1})):(E(),z(Ve,{key:1,color:"info",variant:"outlined",onClick:X},{default:t(()=>[i("选择文件")]),_:1}))]),_:1},8,["rules","modelValue"]),e(_,{placeholder:"请选择基础模型",rules:c.baseModel,modelValue:n.baseModel,"onUpdate:modelValue":o[1]||(o[1]=d=>n.baseModel=d),mapAPI:{url:"/finetuning/base/model"},"hide-details":"auto",onChange:q},{prepend:t(()=>[m("label",Vt,[i("基础模型"),e(U,null,{default:t(()=>[i("基于基础模型进行微调")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"上限512","hide-details":"auto",rules:c.trainEpoch,modelValue:n.trainEpoch,"onUpdate:modelValue":o[2]||(o[2]=d=>n.trainEpoch=d),modelModifiers:{number:!0},onInput:q},{prepend:t(()=>[St]),_:1},8,["rules","modelValue"]),e($,{type:"text",placeholder:"请输入微调后模型名称的后缀","hide-details":"auto",clearable:"",modelValue:n.suffix,"onUpdate:modelValue":o[3]||(o[3]=d=>n.suffix=d)},{prepend:t(()=>[m("label",null,[i("后缀 "),e(U,null,{default:t(()=>[i("微调后模型名称的后缀，通常微调名称为 ft::{模型}:{渠道}:-{随机}:{后缀}")]),_:1})])]),_:1},8,["modelValue"]),e(nt,{modelValue:n.remark,"onUpdate:modelValue":o[4]||(o[4]=d=>n.remark=d),modelModifiers:{trim:!0},placeholder:"请输入你微调模型的备注",clearable:""},{prepend:t(()=>[kt]),_:1},8,["modelValue"]),e(ce,null,{default:t(()=>[e(_t,{ref_key:"refSettingExpansion",ref:h,modelValue:y.value,"onUpdate:modelValue":o[12]||(o[12]=d=>y.value=d)},{default:t(()=>[e(xt,{value:"advancedSetting",elevation:"10"},{default:t(()=>[e(Te,{class:"text-h6"},{default:t(()=>[i("高级设置")]),_:1}),e(ke,{class:"mt-4",eager:""},{default:t(()=>[e(ot,{label:"启用Lora",modelValue:n.lora,"onUpdate:modelValue":o[5]||(o[5]=d=>n.lora=d)},{prepend:t(()=>[Pt]),_:1},8,["modelValue"]),e($,{type:"number",placeholder:"请输入训练批次",rules:c.trainBatchSize,modelValue:n.trainBatchSize,"onUpdate:modelValue":o[6]||(o[6]=d=>n.trainBatchSize=d),modelModifiers:{number:!0}},{prepend:t(()=>[m("label",Tt,[i("训练批次 "),e(U,null,{default:t(()=>[i("即一次训练所抓取的数据样本数量")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"请输入评估批次",rules:c.evalBatchSize,modelValue:n.evalBatchSize,"onUpdate:modelValue":o[7]||(o[7]=d=>n.evalBatchSize=d),modelModifiers:{number:!0}},{prepend:t(()=>[m("label",It,[i("评估批次 "),e(U,null,{default:t(()=>[i("用于评估的每个 GPU/TPU 核心/CPU 的批量大小")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"请输入梯度累加步数",rules:c.accumulationSteps,modelValue:n.accumulationSteps,"onUpdate:modelValue":o[8]||(o[8]=d=>n.accumulationSteps=d),modelModifiers:{number:!0}},{prepend:t(()=>[m("label",Ct,[i("梯度累加步数 "),e(U,null,{default:t(()=>[i("在执行向后/更新传递之前累积梯度的更新步骤数")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"请输入使用GPU数量",rules:c.procPerNode,modelValue:n.procPerNode,"onUpdate:modelValue":o[9]||(o[9]=d=>n.procPerNode=d),modelModifiers:{number:!0},onInput:q},{prepend:t(()=>[m("label",wt,[i("使用GPU数量 "),e(U,null,{default:t(()=>[i("使用GPU数量")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"请输入学习率",rules:c.learningRate,modelValue:n.learningRate,"onUpdate:modelValue":o[10]||(o[10]=d=>n.learningRate=d),modelModifiers:{number:!0},step:1e-5},{prepend:t(()=>[m("label",Et,[i("学习率 "),e(U,null,{default:t(()=>[i("AdamW 优化器的初始学习率")]),_:1})])]),_:1},8,["rules","modelValue"]),e($,{type:"number",placeholder:"请输入模型最大长度",rules:c.modelMaxLength,modelValue:n.modelMaxLength,"onUpdate:modelValue":o[11]||(o[11]=d=>n.modelMaxLength=d),modelModifiers:{number:!0}},{prepend:t(()=>[m("label",Mt,[i("模型最大长度 "),e(U,null,{default:t(()=>[i("模型支持的最大上下文长度")]),_:1})])]),_:1},8,["rules","modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},512)]),e(v,{ref_key:"refDialogUpload",ref:g,attach:"",persistent:"","max-width":"1200px","retain-focus":!1},{title:t(()=>[i(" 选择文件 ")]),default:t(()=>[e(pt,{onSelected:ee})]),_:1},512)]),_:2},[f.estimateTime?{name:"txtLeft",fn:t(()=>[m("p",gt,[i(" 预计训练时间："),m("span",null,T(f.estimateTime),1)])]),key:"0"}:void 0]),1536)}}});const $t=Se(Ut,[["__scopeId","data-v-6407775c"]]),Bt={class:"tooltip-error-message"},Dt=oe({__name:"TableTrainStatus",props:{item:{default:()=>({})}},emits:["open:log"],setup(a,{emit:S}){const r=a,s=S,n=A(()=>{var x;return(x=pe[r.item.trainStatus])==null?void 0:x.text}),f=A(()=>{var x;return[(x=pe[r.item.trainStatus])==null?void 0:x.textColor,"d-flex","justify-center","align-center"]}),p=()=>{s("open:log")};return(x,I)=>(E(),N("div",{class:De(f.value)},[m("span",null,T(n.value),1),["running","success"].includes(r.item.trainStatus)?(E(),N("div",{key:0,class:"link ml-1",onClick:p},"(日志)")):ie("",!0),r.item.trainStatus==="failed"&&r.item.errorMessage?(E(),z(U,{key:1,class:"ml-1"},{default:t(()=>[m("div",Bt,T(r.item.errorMessage),1)]),_:1})):ie("",!0)],2))}});const At=Se(Dt,[["__scopeId","data-v-297d4594"]]),Lt=["onClick"],Rt=m("span",{class:"text-primary"},"取消",-1),Ft=m("br",null,null,-1),qt={class:"text-primary font-weight-black"},zt=m("br",null,null,-1),pa={__name:"fineTuningList",setup(a){const S=[{statusText:"等待中",valueText:"个任务",key:"waitingJobCount",color:"warning",bgColor:"lightwarning",icon:rt},{statusText:"已完成",valueText:"个微调任务",key:"successJobCount",color:"success",bgColor:"lightsuccess",icon:ct},{statusText:"总微调时间",valueText:"",key:"totalDurationCount",color:"secondary",bgColor:"lightprimary",icon:ut}],r=Ae(),s=V({title:"微调任务"}),n=V([{text:"模型微调",disabled:!1,href:"#"},{text:"微调任务",disabled:!0,href:"#"}]),f=D({fineTunedModel:"",trainStatus:null}),p=D({list:[],total:0}),x=V(),I=V(),k=V(),C=V(),g=D({currentJobId:""}),h=V(),c=V(""),y=b=>{let P=[];const l=b.trainStatus;return P.push({text:"查看",click(){W(b)}}),l==="running"||l==="waiting"?P.push({text:"取消",color:"error",click(){ee(b)}}):(l==="failed"||l==="cancel")&&P.push({text:"删除",color:"error",click(){ae(b)}}),P},M=async(b={})=>{const[P,l]=await R.get({url:"/finetuning",showLoading:I.value.el,data:{...f,...b}});l?(p.list=l.list||[],p.total=l.total):(p.list=[],p.total=0)},F=()=>{I.value.query({page:1})},X=async({jobId:b})=>{k.value.show();let[P,l]=await R.get({url:`/api/finetuning/${b}`});l&&k.value.setContent(l.trainLog)},ee=b=>{g.currentJobId=b.jobId,C.value.show({width:"450px",confirmText:g.currentJobId})},te=async(b={})=>{const[P,l]=await R.delete({...b,showSuccess:!0,url:`/finetuning/${g.currentJobId}/cancel`});l&&(C.value.hide(),I.value.query())},W=({jobId:b})=>{r.push(`/model/fine-tuning/detail?jobId=${b}`)},ae=b=>{c.value=b.jobId,h.value.show({width:"400px"})},le=async(b={})=>{const[P,l]=await R.delete({...b,showSuccess:!0,url:`/api/finetuning/${c.value}`});l&&(h.value.hide(),F())},q=()=>{x.value.show({title:"创建微调任务",operateType:"add"})};return me(()=>{M()}),(b,P)=>{const l=w("Select"),o=w("ButtonsInForm"),_=w("el-tooltip"),v=w("el-table-column"),B=w("router-link"),d=w("ButtonsInTable"),Ie=w("TableWithPager");return E(),N(re,null,[e(Re,{title:s.value.title,breadcrumbs:n.value},null,8,["title","breadcrumbs"]),e(ue,{class:"mb-3"},{default:t(()=>[e(it,{config:S,"request-url":"/finetuning/dashboard"})]),_:1}),e(ue,null,{default:t(()=>[e(ve,null,{default:t(()=>[e(L,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[e($,{density:"compact",modelValue:f.fineTunedModel,"onUpdate:modelValue":P[0]||(P[0]=u=>f.fineTunedModel=u),label:"请输入关键字","hide-details":"",clearable:"",variant:"outlined",onKeyup:Le(F,["enter"]),"onClick:clear":F},null,8,["modelValue","onKeyup"])]),_:1}),e(L,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[e(l,{onChange:F,label:"请选择状态",mapDictionary:{code:"local_trainStatus"},modelValue:f.trainStatus,"onUpdate:modelValue":P[1]||(P[1]=u=>f.trainStatus=u)},null,8,["modelValue"])]),_:1}),e(L,{cols:"12",lg:"3",md:"4",sm:"6"},{default:t(()=>[e(o,null,{default:t(()=>[e(Ve,{color:"primary",onClick:q},{default:t(()=>[i("创建微调任务")]),_:1})]),_:1})]),_:1}),e(L,{cols:"12"},{default:t(()=>[e(be,null,{default:t(()=>[i(" GPU资源紧张，暂时只支持同时进行一个微调任务！ ")]),_:1})]),_:1}),e(L,{cols:"12"},{default:t(()=>[e(Ie,{onQuery:M,ref_key:"tableWithPagerRef",ref:I,infos:p},{default:t(()=>[e(v,{label:"任务ID",width:"180px"},{default:t(({row:u})=>[e(_,{content:"查看详情",placement:"top"},{default:t(()=>[m("span",{class:"link",onClick:ne=>W(u)},T(u.jobId),9,Lt)]),_:2},1024)]),_:1}),e(v,{label:"基础模型",width:"120px"},{default:t(({row:u})=>[e(_,{effect:"dark",content:"进入聊天操场",placement:"top"},{default:t(()=>[e(B,{class:"link",to:{path:"/model/chat-playground",query:{modelName:u.baseModel}}},{default:t(()=>[i(T(u.baseModel),1)]),_:2},1032,["to"])]),_:2},1024)]),_:1}),e(v,{label:"训练轮次",prop:"trainEpoch","min-width":"90px"}),e(v,{label:"Lora"},{default:t(({row:u})=>[e(ze,{modelValue:u.lora,"onUpdate:modelValue":ne=>u.lora=ne},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(v,{label:"训练状态","min-width":"150px"},{default:t(({row:u})=>[e(At,{item:u,"onOpen:log":ne=>X(u)},null,8,["item","onOpen:log"])]),_:1}),e(v,{label:"训练时长",prop:"trainDuration","min-width":"120px"}),e(v,{label:"训练进度","min-width":"90px"},{default:t(({row:u})=>[m("span",null,T(Y(j).toPercent(u.process,2)),1)]),_:1}),e(v,{label:"模型名称",width:"110px"},{default:t(({row:u})=>[u.trainStatus==="success"?(E(),z(B,{key:0,class:"link",to:{path:"/model/model-list",query:{modelName:u.fineTunedModel}}},{default:t(()=>[i(T(u.fineTunedModel),1)]),_:2},1032,["to"])):(E(),N(re,{key:1},[i(" -- ")],64))]),_:1}),e(v,{label:"备注","min-width":"200px","show-overflow-tooltip":""},{default:t(({row:u})=>[i(T(u.remark),1)]),_:1}),e(v,{label:"完成时间","min-width":"160px"},{default:t(({row:u})=>[i(T(u.finishedAt?Y(j).dateFormat(u.finishedAt,"YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:1}),e(v,{label:"创建时间","min-width":"160px"},{default:t(({row:u})=>[i(T(Y(j).dateFormat(u.createdAt,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(v,{label:"操作人",prop:"trainPublisher","min-width":"150px","show-overflow-tooltip":""}),e(v,{label:"操作","min-width":"120px",fixed:"right"},{default:t(({row:u})=>[e(d,{buttons:y(u)},null,8,["buttons"])]),_:1})]),_:1},8,["infos"])]),_:1})]),_:1})]),_:1}),e(dt,{ref_key:"refDialogLog",ref:k},null,512),e(Fe,{ref_key:"refConfirmAbort",ref:C,onSubmit:te},{text:t(()=>[i(" 此操作将会"),Rt,i("正在进行的训练任务"),Ft,i(" 任务ID："),m("span",qt,T(g.currentJobId),1),zt,i(" 你还要继续吗？ ")]),_:1},512),e(qe,{ref_key:"refConfirmDelete",ref:h,onSubmit:le},{text:t(()=>[i("确定删除此任务？")]),_:1},512),e($t,{ref_key:"createTaskPaneRef",ref:x,onSubmit:F},null,512)],64)}}};export{pa as default};
